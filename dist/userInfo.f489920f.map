{"version":3,"sources":["js\\userInfo\\index.js"],"names":["index","phone","document","querySelector","integral","industry","token","data","getInfo","window","addEventListener","e","state","app","getState","mui","ajax","url","api_token","dataType","type","timeout","success","innerText","career","name","changeIndustry","plus","nativeUI","closeWaiting","error","xhr","errorThrown","toast","List","cheIns","ins","status","len","length","i","push","value","id","text","showList","picker","PopPicker","setData","oldText","show","SelectedItem","newText","career_id","on","title","hr","getAttribute","openWindow","extras","createNew","aniShow","waiting","autoShow","getElementById","os","ios","setState","btnArray","actionSheet","cancel","buttons","event","webview","getLaunchWebview","GetUserInfo","InfoList","GetPhone","GetIntegral","GetIndustry","prototype"],"mappings":"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","file":"userInfo.f489920f.map","sourceRoot":"..","sourcesContent":["var index = null;\r\n\t\t\t\r\n\r\n\r\nvar phone = document.querySelector('span.phone'),\r\n\tintegral = document.querySelector('span.integral'),\r\n\tindustry = document.querySelector('span.industry');\r\n\t\r\nvar token = null;\r\nvar data = null;\r\nvar getInfo = null;\r\n\r\n\r\nwindow.addEventListener('getToken',function(e){\r\n\tvar state = app.getState();\r\n\ttoken = state.token;\r\n//\t\tplus.nativeUI.showWaiting(null,{back:'none'});\r\n//\t\ttoken = e.detail.token;\r\n\tmui.ajax(url+'/user/info',{\r\n\t\tdata:{\r\n\t\t\tapi_token: token\r\n\t\t},\r\n\t\tdataType:'json',\r\n\t\ttype:'get',\r\n\t\ttimeout:10000,\r\n\t\tsuccess:function(data){\r\n\t\t\tphone.innerText = data.data.phone;\r\n\t\t\tintegral.innerText = '暂未开放';\r\n\t\t\tindustry.innerText = data.data.career.name;\r\n\t\t\tchangeIndustry(token);\r\n\t\t\tplus.nativeUI.closeWaiting();\r\n\t\t},\r\n\t\terror:function(xhr,type,errorThrown){\r\n\t    \tplus.nativeUI.closeWaiting();\r\n\t        plus.nativeUI.toast('服务器连接超时，请稍后再试');\r\n\t\t}\r\n\t});\r\n\t\r\n})\r\n\r\n\r\nvar List = [];\r\nvar cheIns = document.querySelector('#cheIns');\r\nvar ins = document.querySelector('span.industry');\r\nfunction changeIndustry(token){\r\n\tmui.ajax(url+'/career/list',{\r\n\t\tdata:{\r\n\t\t\tapi_token: token\r\n\t\t},\r\n\t\tdataType:'json',\r\n\t\ttype:'get',\r\n\t\ttimeout:10000,\r\n\t\tsuccess:function(data){\r\n\t\t\tif(data.status==0){\r\n\t\t\t\tList = [];\r\n\t\t\t\tvar len = data.data.length;\r\n\t\t\t\tfor (var i=0;i<len;i++) {\r\n\t\t\t\t\tList.push({\r\n\t\t\t\t\t\tvalue: data.data[i].id,\r\n\t\t\t\t\t\ttext: data.data[i].name\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tshowList(List);\r\n\t\t\t}\r\n\t\t},\r\n\t\terror:function(xhr,type,errorThrown){\r\n\t    \tplus.nativeUI.closeWaiting();\r\n\t        plus.nativeUI.toast('服务器连接超时，请稍后再试');\r\n\t\t}\r\n\t});\r\n\t\r\n}\r\n\r\nvar picker = new mui.PopPicker(); \t\t\t\r\nfunction showList(data){\r\n\tpicker.setData(data);\r\n\tcheIns.addEventListener('click',function(){\r\n\t\tvar oldText = ins.innerText;\r\n\t\tpicker.show(function(SelectedItem) {\r\n\t\t\t\r\n\t\t\tvar newText = SelectedItem[0].text;\r\n\t\t\tif(oldText==newText){\r\n\t\t\t\tins.innerText = oldText;\r\n\t\t\t}else{\r\n\t\t\t\tmui.ajax(url+'/user/selectcareer',{\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tapi_token: token,\r\n\t\t\t\t\t\tcareer_id: SelectedItem[0].value\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdataType:'json',\r\n\t\t\t\t\ttype:'post',\r\n\t\t\t\t\ttimeout:10000,\r\n\t\t\t\t\tsuccess:function(data){\r\n\t\t\t\t\t\tif(data.status==0){\r\n\t\t\t\t\t\t\tplus.nativeUI.toast('行业修改成功！');\r\n\t\t\t\t\t\t\tins.innerText = newText;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tplus.nativeUI.toast('行业修改失败！');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror:function(xhr,type,errorThrown){\r\n\t\t\t\t    \tplus.nativeUI.closeWaiting();\r\n\t\t\t\t        plus.nativeUI.toast('服务器连接超时，请稍后再试');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t});\r\n}\r\n\t\t\t\r\nwindow.addEventListener('pickerHide',function(){\r\n//\tpicker.hide();\r\n});\r\n\r\n\r\n\r\nmui('.mui-content').on('click', 'li.li-item', function() {\r\n\tvar title = this.querySelector('a').innerText;\t \r\n\tvar hr = this.getAttribute('data-hr');\r\n\tmui.openWindow({\r\n\t  \turl: hr,\r\n\t  \tid: hr,\r\n\t \textras:{\r\n\t      \ttitle: title,\r\n\t      \ttoken: token\r\n\t    },\r\n\t    createNew:false,\r\n\t  \tshow:{\r\n\t      \taniShow: 'slide-in-right',//页面显示动画，默认为”slide-in-right“；\r\n\t   \t},\r\n\t   \twaiting:{\r\n      \t\tautoShow:true,//自动显示等待框，默认为true\r\n      \t\ttitle:'正在加载...',//等待对话框上显示的提示内容\r\n      \t}\r\n\t});\r\n});\r\n\r\ndocument.getElementById('exit').addEventListener('tap', function() {\r\n\tif (mui.os.ios) {\r\n\t\tapp.setState({});\r\n\t\tmui.openWindow({\r\n\t\t\turl: '../login.html',\r\n\t\t\tid: 'login',\r\n\t\t\tshow: {\r\n\t\t\t\taniShow: 'pop-in'\r\n\t\t\t},\r\n\t\t\twaiting: {\r\n\t\t\t\tautoShow: false\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn;\r\n\t}\r\n\tvar btnArray = [{\r\n\t\ttitle: \"注销当前账号\"\r\n\t}];\r\n\tplus.nativeUI.actionSheet({\r\n\t\tcancel: \"取消\",\r\n\t\tbuttons: btnArray\r\n\t}, function(event) {\r\n\t\tvar index = event.index;\r\n\t\tswitch (index) {\r\n\t\t\tcase 1:\r\n\t\t\t\t//注销账号\r\n\t\t\t\tapp.setState({});\r\n\t\t\t\tplus.webview.getLaunchWebview().show(\"pop-in\");\r\n\t\t\t\t//若启动页不是登录页，则需通过如下方式打开登录页\r\n//\t\t\t\t\t\tmui.openWindow({\r\n//\t\t\t\t\t\t\turl: 'login.html',\r\n//\t\t\t\t\t\t\tid: 'login',\r\n//\t\t\t\t\t\t\tshow: {\r\n//\t\t\t\t\t\t\t\taniShow: 'pop-in'\r\n//\t\t\t\t\t\t\t}\r\n//\t\t\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t});\r\n}, false);\r\n\r\n\r\n\r\nvar GetUserInfo = function(data){\r\n\tthis.InfoList = {};\r\n\tthis.data=data;\r\n\tthis.GetPhone();\r\n\tthis.GetIntegral();\r\n\tthis.GetIndustry();\r\n\treturn this.InfoList;\r\n}\r\n\r\nGetUserInfo.prototype.GetPhone = function(){//获取手机\r\n\tvar phone = this.data.phone;\r\n\tthis.InfoList.phone = phone;\r\n}\r\nGetUserInfo.prototype.GetIntegral = function(){//获取积分\r\n\tvar integral = '暂未开放'\r\n\tthis.InfoList.integral = integral;\r\n}\r\nGetUserInfo.prototype.GetIndustry = function(){//获取行业\r\n\tvar industry = this.data.career.name;\r\n\tthis.InfoList.industry = industry;\r\n}"]}